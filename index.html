<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bóc Quẻ Năm Mới</title>

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont;
      background: linear-gradient(135deg, #7A1616 0%, #7A1616 40%, #F5E9D4 100%);
      background-attachment: fixed;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
    }

    .card {
      background: #FFFBF3;
      padding: 32px;
      border-radius: 16px;
      width: 90%;
       max-width: 360px;
      text-align: center;
      box-shadow: 0 24px 50px rgba(0,0,0,0.35);
      position: relative;
      z-index: 200;
      transition: max-height 0.5s ease;
    }

    .logo {
      width: 180px;
      margin-bottom: 8px;
    }
    .intro {
      position: fixed;
      inset: 0;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeOut 1.2s ease forwards;
      animation-delay: 1.8s;
    }

    .intro img {
      width: 200px;
      animation: fadeIn 1.2s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.96); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes fadeOut {
      to { opacity: 0; visibility: hidden; }
    }

    h1 {
      margin-bottom: 16px;
      color: #14532D;
    }

    input {
      width: 100%;
      padding: 12px;
      box-sizing: border-box;
      border-radius: 8px;
      border: 1px solid #ddd;
      margin-bottom: 16px;
      font-size: 16px;
    }

    button {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #D97706, #F59E0B);
      color: white;
      font-size: 16px;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.9;
    }

    #result {
      margin-top: 20px;
      font-weight: 600;
    }

    .cards {
      display: none;
      margin-top: 24px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, auto);
      gap: 14px;
      justify-items: center;
      position: relative;
    }

    .card-item {
      width: 80px;
      height: 120px;
      border-radius: 10px;
      background: linear-gradient(135deg, #14532D, #166534);
      cursor: pointer;
      transform-style: preserve-3d;
      transition: transform 0.8s ease, opacity 0.5s ease;
      position: relative;
    }

    .card-item.reveal {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) rotateY(180deg) scale(1.6);
      z-index: 500;
    }

    .card-item.hide {
      transform: translateY(40px) scale(0.8);
      opacity: 0;
    }

    .card-front, .card-back {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      border-radius: 10px;
    }

    .card-front {
      background: linear-gradient(135deg, #14532D, #166534);
    }

    .card-back {
      transform: rotateY(180deg);
      background-size: cover;
      background-position: center;
    }

    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
      z-index: 100;
    }
    .overlay.show {
      opacity: 1;
      pointer-events: auto;
    }
  </style>
</head>

<body>
  <div class="intro">
    <img src="https://github.com/nghianguyen1-sketch/bo-que/blob/main/ForeScent-2.png?raw=true" alt="ForeScent Intro Logo">
  </div>
  <div class="overlay" id="overlay"></div>
  <div class="card">
    <img src="https://github.com/nghianguyen1-sketch/bo-que/blob/main/ForeScent-2.png?raw=true" alt="ForeScent Logo" class="logo">
    <h1>Bóc Quẻ Năm Mới</h1>

    <input type="text" id="code" placeholder="Nhập mã trên thiệp">
    <button onclick="checkCode()">Xem kết quả</button>

    <p id="error" style="color:#c33764; margin-top:12px;"></p>
    <div class="cards" id="cards">
      <div class="card-item"><div class="card-front"></div><div class="card-back"></div></div>
      <div class="card-item"><div class="card-front"></div><div class="card-back"></div></div>
      <div class="card-item"><div class="card-front"></div><div class="card-back"></div></div>
      <div class="card-item"><div class="card-front"></div><div class="card-back"></div></div>
      <div class="card-item"><div class="card-front"></div><div class="card-back"></div></div>
      <div class="card-item"><div class="card-front"></div><div class="card-back"></div></div>
    </div>
  </div>

  <script>
    function checkCode() {
      const codeMap = {
        "ABC123": "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee",
        "XYZ999": "https://images.unsplash.com/photo-1501785888041-af3ef285b470",
        "MAYMAN": "https://images.unsplash.com/photo-1499084732479-de2c02d45fc4",
        "HIMELA": "https://images.unsplash.com/photo-1499084732479-de2c02d45fc4",
        "SUPERL": "https://images.unsplash.com/photo-1499084732479-de2c02d45fc4",
        "MINHBEO": "https://github.com/nghianguyen1-sketch/bo-que/blob/main/MINHBEO.JPEG?raw=true"
      };

      const code = document.getElementById("code").value.trim().toUpperCase();
      const errorEl = document.getElementById("error");
      const cardsWrap = document.getElementById("cards");
      const cards = document.querySelectorAll(".card-item");
      const overlay = document.getElementById("overlay");
      const mainCard = document.querySelector(".card");

      errorEl.innerText = "";

      const codeKeys = Object.keys(codeMap);
      const chosenIndex = codeKeys.indexOf(code);

      if (!code) {
        errorEl.innerText = "⚠️ Vui lòng nhập mã.";
        return;
      }

      if (!codeMap[code]) {
        errorEl.innerText = "❌ Mã không hợp lệ hoặc đã được sử dụng.";
        return;
      }

      if (chosenIndex === -1) {
        errorEl.innerText = "❌ Mã không hợp lệ.";
        return;
      }

      overlay.classList.add("show");
      mainCard.style.maxHeight = "800px";
      cardsWrap.style.display = "grid";

      document.getElementById("code").disabled = true;

      cards.forEach((card, index) => {
        const back = card.querySelector(".card-back");

        if (index === chosenIndex) {
          back.style.backgroundImage = `url('${codeMap[code]}')`;
          setTimeout(() => {
            card.classList.add("reveal");
          }, 300);
        } else {
          setTimeout(() => card.classList.add("hide"), 500);
        }
      });

      setTimeout(() => {
        overlay.classList.remove("show");
      }, 1200);

      setTimeout(() => {
        const resetBtn = document.createElement("button");
        resetBtn.innerText = "Nhập mã khác";
        resetBtn.style.marginTop = "24px";
        resetBtn.style.position = "relative";
        resetBtn.style.zIndex = "300";
        resetBtn.onclick = () => location.reload();
        cardsWrap.after(resetBtn);
      }, 1200);
    }
  </script>
</body>
</html>
